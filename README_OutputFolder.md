# README - Put a copy of this in BASE_DIR folder too for easy access

This is a folder for computers and robots, and the primary place that video for Lookit is stored and processed. Humans should do very little *editing* here, except for in the `consent_and_coding/` CSV spreadsheets. This is also a folder for safe data storage - raw video (of all privacy settings) is downloaded to local storage here; be very careful with anything that comes back out of this directory. 

The folder is populated and updated using the scripting in `Lookit/lookit-data-processing`. This readme should be copied both here and in lookit-data-processing. An example of how this folder could look following downloading/coding videos for the physics pilot/early subjects is available in `Lookit/Kim Import/lookitcodingv1` and `Lookit/Kim Import/lookitcodingv2`

## subfolders

(You can choose how these are named in `lookit-data-processing/scripts/.env-prod`, Melissa uses fairly verbose names that are longer than the defaults.)

### consent_and_coding/

Human-readable spreadsheets live in here, generally recording one session or one account per line. They are generated by runnning coding.py commands from the scripts folder like `python coding.py fetchconsentsheet --study physics --coder Melissa`, and then *lightly* modified by human coders to track the process of (1) checking consent videos for validity/usability, (2) marking up whether sessions have been hand-coded for looking times, and (3) recording feedback that will be displayed to parents about that session. 

#### Folder contents: 

`accountsprod_<STUDYHEXID>.csv` - A list of all *accounts* that have participated in the study with this ID. Each line contains account IDs and preferences (e.g. for email contact) for the account, IDs and demographics for each child associated with that account, and family demographics as well. This file is re-generated from the `python_data/` objects whenever you run `python coding.py update --study physics` command.

`<STUDYHEXID>_<CODERNAME>.csv` - This file is dynamically re-created from the `python_data/` objects, and is a 'temporary' but also human-readable version of those objects. Depending on the last command run, it either lists *all* sessions from a study (for tracking consent coding) or *consented, useable, and not withdrawn* sessions (for tracking VCode/looking time coding.)

`backup/` - Versions of the coding/consent spreadsheets that have been archived (they are stored here during updates of coder sheets in case of problems during processing.)

### python_data/

Contains pickled python objects; these can be directly opened in python scripts if desired, but most information a person will want to access are also present in `consent_and_coding` spreadsheets. They are:

`video_data.bin` - Melissa's not sure what's in here

`session_data_<STUDYHEXID>.bin` - All sessions for a particular study; the source file for the human coding sheets. 

`coding_data_<STUDYHEXID>.bin` - Melissa's not sure what the division of labor with session_data is, but information about e.g. whether consent is valid is stored/orginates here. 

`backup/` - Versions that have been archived (they are stored here during updates of coder sheets in case of problems during processing.)

`accountsprod.bin` - Origin object for the accountsprod CSV produced in consent_and_coding

### video_export/

Videos of participants in a study are created here by `coding.py` commands as they are needed; these are more convenient forms for sharing and will typically involve taking a whole-session `<STUDYHEXID>_<SESSIONID>.mp4` file and marking up the filename to indicate sharing/privacy settings. 

### video_sessions/

Videos of participants in a study are created here by `coding.py` commands as they are needed: for instance, only Consent videos will be pulled up here *unless* it's determined that consent has been granted, in which case a folder for the entire session will be created. The structure of this directory is:

```
<STUDY1HEXID>/
	consents/ <--special directory where all consent videos for a study go
	<SESSIONID1>/
	<SESSIONID2>/
		<STUDYHEXID>_<SESSIONID>.mp4 <- the full concatenated video of the whole session. Coders doing VCode markup will work from this file. The names of the frames are written into the video file to help keep coders oriented as they go, but the timing/lengths of each trial can also be regenerated from the CSV or pickled python objects.
		videoStream_<STUDYHEXID>_<FRAMENAME>_<SESSIONID>_<randomnumberstring>_<trimmed/whole>.mp4 <- one per frame, named depending on if the video feed from this frame has been truncated (this is set somehwere in the scripts folder)

```


### video_source/

Raw videos, one per Frame of the experiment on Lookit, as originally downloaded from the server. Humans never need to look at videos in this folder. Has a flat structure inside, with either flv or mp4 video files (depending on whether they are before or after the video accounting change.) Files are named as follows:

`videoStream_<STUDYHEXID>_<FRAMENAME>_<SESSIONID>_<randomnumberstring>.mp4`


